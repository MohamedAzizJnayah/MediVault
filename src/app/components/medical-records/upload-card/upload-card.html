<div class="max-w-xl mx-auto bg-white rounded-2xl shadow-lg p-6 border border-gray-100">

  <!-- Header -->
  <div class="mb-6">
    <h2 class="text-xl font-semibold text-gray-800">
      Upload Medical Record
    </h2>
    <p class="text-sm text-gray-500">
      Add a medical document (PDF, image, analysis, prescription)
    </p>
  </div>

  <!-- Form -->
  <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()" class="space-y-5">

    <!-- Filename -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Document name
      </label>
      <input
       [appAutoFocus]="true"
        type="text"
        formControlName="filename"
        placeholder="e.g. Blood test results"
        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
      />

      @if (uploadForm.get('filename')?.touched && uploadForm.get('filename')?.invalid) {
        <p class="text-sm text-red-500 mt-1">
          Document name is required
        </p>
      }
    </div>

    <!-- Tags -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">
        Tags (optional)
      </label>
      <input
        type="text"
        formControlName="tags"
        placeholder="analysis, prescription, x-ray"
        class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"
      />
    </div>

    <!-- File Upload -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">
        Select file
      </label>

      <div
        class="flex items-center justify-center w-full px-4 py-6 border-2 border-dashed rounded-xl cursor-pointer transition
               hover:border-blue-400 hover:bg-blue-50"
      >
        <input
          type="file"
          class="hidden"
          id="fileInput"
          (change)="onFileSelected($event)"
        />
        <label for="fileInput" class="text-center cursor-pointer">
          @if (!selectedFile) {
            <div class="text-gray-500">
              <p class="font-medium">Click to upload</p>
              <p class="text-sm">PDF, JPG, PNG</p>
            </div>
          } @else {
            <div class="text-green-600">
              <p class="font-medium">File selected</p>
              <p class="text-sm">{{ selectedFile.name }}</p>
            </div>
          }
        </label>
      </div>

      @if (uploadForm.get('file')?.touched && uploadForm.get('file')?.invalid) {
        <p class="text-sm text-red-500 mt-1">
          Please select a file
        </p>
      }
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="uploadForm.invalid"
      class="w-full py-3 rounded-xl font-semibold transition
             bg-blue-600 text-white
             disabled:bg-gray-300 disabled:cursor-not-allowed
             hover:bg-blue-700"
    >
      Upload document
    </button>

  </form>

</div>
